(this.webpackJsonpassginthree=this.webpackJsonpassginthree||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),o=a(13),i=a(6),s=a.n(i),u=a(31),m=a.n(u),p=function(){return function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"REGISTER_LOADING"});case 1:case"end":return t.stop()}}))}},d=function(){return function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"LOGIN_LOADING"});case 1:case"end":return t.stop()}}))}},E=a(30),f=a(17),g=a(132),h=a(141),y=a(136),b=a(39),O=a(26),v=function(e){var t=Object(o.b)(),a=Object(b.a)({mode:"onChange"}),c=a.handleSubmit,l=a.errors,i=a.register,u=Object(n.useState)(null),d=Object(f.a)(u,2),v=d[0],j=d[1],R=Object(o.c)((function(e){return e.auth.isAuth})),I=Object(o.c)((function(e){return e.auth.loading})),k=Object(o.c)((function(e){return e.auth.registerError}));return Object(n.useEffect)((function(){k&&j(k)}),[k]),R?r.a.createElement(E.a,{to:"/main"}):I?r.a.createElement("section",null,r.a.createElement("h1",null,"Loading..........")):r.a.createElement("section",{style:{textAlign:"center",marginTop:300}},r.a.createElement("h1",null,"Please Register"),v&&r.a.createElement("h1",null,v),r.a.createElement("form",{onSubmit:c((function(e){return t((a=e,function(e){var t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e(p()),e({type:"REGISTER_ERROR",payload:null}),n.prev=2,n.next=5,s.a.awrap(m.a.post("https://assignmentforoffice.herokuapp.com/api/users",a));case 5:t=n.sent,console.log(t),e({type:"REGISTER_SUCCESS",payload:t.data}),localStorage.setItem("token",t.data.token),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),e({type:"REGISTER_ERROR",payload:n.t0.response.data.msg});case 14:e(p());case 15:case"end":return n.stop()}}),null,null,[[2,11]])}));var a}))},r.a.createElement(g.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(h.a,{style:{margin:10},name:"name",inputRef:i({required:"This Field is Requried",pattern:{value:/[a-zA-Z][a-zA-Z0-9-_]{3,32}/,message:"Invalid Name"}}),label:"Enter Username",variant:"outlined",color:"primary"}),l.name&&r.a.createElement("p",null,l.name.message),r.a.createElement(h.a,{style:{margin:10},name:"email",inputRef:i({required:"This Field is Requried",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Invalid email address"}}),label:"Enter Email Address",variant:"outlined",color:"primary"}),l.email&&r.a.createElement("p",null,l.email.message),r.a.createElement(h.a,{style:{margin:10},name:"password",inputRef:i({required:"This Field is Requried"}),label:"Enter Password",variant:"outlined",color:"primary",type:"password"}),r.a.createElement(y.a,{style:{margin:10},variant:"contained",color:"primary",type:"submit"},"Register"),r.a.createElement(y.a,{style:{margin:10},variant:"outlined",color:"primary"},r.a.createElement(O.b,{to:"/"},"Login")))))},j=a(144),R=a(142),I=function(e){var t=Object(o.b)(),a=Object(b.a)({mode:"onChange"}),c=a.handleSubmit,l=a.errors,i=a.register,u=Object(n.useState)(null),p=Object(f.a)(u,2),v=p[0],I=p[1],k=Object(n.useState)(!1),S=Object(f.a)(k,2),T=S[0],x=S[1],A=Object(o.c)((function(e){return e.auth.isAuth})),L=Object(o.c)((function(e){return e.auth.loading})),w=Object(o.c)((function(e){return e.auth.loginError}));return Object(n.useEffect)((function(){w&&I(w)}),[w]),A?r.a.createElement(E.a,{to:"/main"}):L?r.a.createElement("section",null,r.a.createElement("h1",null,"Loading..........")):(console.log(v),r.a.createElement("section",{style:{textAlign:"center",marginTop:300}},r.a.createElement("h1",null,"Please Login"),v&&r.a.createElement("h1",null,v),r.a.createElement("form",{onSubmit:c((function(e){return t(function(e,t){return function(a){var n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a(d()),a({type:"LOGIN_ERROR",payload:null}),r.prev=2,r.next=5,s.a.awrap(m.a.post("https://assignmentforoffice.herokuapp.com/api/auth",e));case 5:n=r.sent,console.log(n.data),a({type:"LOGIN_SUCCESS",payload:n.data}),t&&localStorage.setItem("token",n.data.token),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(2),a({type:"LOGIN_ERROR",payload:r.t0.response.data.msg});case 14:a(d());case 15:case"end":return r.stop()}}),null,null,[[2,11]])}}(e,T))}))},r.a.createElement(g.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(h.a,{name:"email",inputRef:i({required:"This Field is Requried",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Invalid email address"}}),label:"Enter Email Address",variant:"outlined",color:"primary"}),l.email&&r.a.createElement("p",null," ",l.email.message),r.a.createElement(h.a,{name:"password",inputRef:i({required:"This Field is Requried"}),style:{margin:"20px 0"},label:"Enter Password",variant:"outlined",color:"primary",type:"password"}),l.password&&r.a.createElement("p",null," ",l.password.message),r.a.createElement(j.a,{control:r.a.createElement(R.a,{checked:T,value:"checkedB",color:"primary",onChange:function(){return x(!T)}}),label:"Keep me Login"}),r.a.createElement(y.a,{variant:"contained",color:"primary",type:"submit"},"Login"),r.a.createElement(y.a,{variant:"outlined",color:"primary",style:{margin:10}},r.a.createElement(O.b,{to:"/register"},"Register"))))))},k=a(138),S=a(139),T=a(140),x=a(137),A=a(68),L=a.n(A),w=function(){var e=Object(o.b)(),t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],l=a[1],i=Object(o.c)((function(e){return e.auth.isAuth})),u=Object(o.c)((function(e){return e.main.items})),p=Object(o.c)((function(e){return e.main.isLoading}));return console.log(u),Object(n.useEffect)((function(){!u&&e((function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(m.a.get("https://assignmentforoffice.herokuapp.com/api/items"));case 2:t=a.sent,console.log(t.data),e({type:"GETTING_ITEMS",payload:t.data});case 5:case"end":return a.stop()}}))}))}),[]),i?p?r.a.createElement("section",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement("h1",null,"Loading..........")):r.a.createElement("div",null,r.a.createElement(y.a,{onClick:function(){return e((function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"LOGOUT"});case 1:case"end":return t.stop()}}))}))},variant:"contained",color:"primary"},"Logout"),r.a.createElement("section",{style:{textAlign:"center",marginTop:100}},r.a.createElement("h1",null,"Shopping List")),r.a.createElement(g.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(h.a,{value:c,onChange:function(e){return l(e.target.value)},label:"Add Item",variant:"outlined"}),r.a.createElement(y.a,{style:{marginTop:10},onClick:function(){return e(function(e){return function(t,a){var n,r;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n={itemName:e},c.next=3,s.a.awrap(m.a.post("https://assignmentforoffice.herokuapp.com/api/items",n,{headers:{"Content-Type":"application/json","x-auth-token":a().auth.token}}));case 3:r=c.sent,t({type:"ADD_ITEM",payload:r.data});case 5:case"end":return c.stop()}}))}}(c))},variant:"contained",color:"primary"},"Add")),r.a.createElement(k.a,null,r.a.createElement(S.a,null,r.a.createElement("h3",null,"List Items")),r.a.createElement(T.a,null,u&&u.map((function(t){return r.a.createElement(S.a,null,r.a.createElement(x.a,{style:{display:"inline",backgroundColor:"red",color:"white",marginTop:2},onClick:function(){return e((a=t._id,function(e,t){return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t().auth.token),n.next=3,s.a.awrap(m.a.delete("https://assignmentforoffice.herokuapp.com/api/items/".concat(a),{headers:{"Content-Type":"application/json","x-auth-token":t().auth.token}}));case 3:n.sent,e({type:"DELETE_ITEM",payload:a});case 5:case"end":return n.stop()}}))}));var a},variant:"outlined",size:"small"},r.a.createElement(L.a,null)),r.a.createElement("p",{style:{display:"inline",marginLeft:10}},t.name))}))))):r.a.createElement(E.a,{to:"/"})},_=function(e){var t=Object(o.b)();Object(o.c)((function(e){return e.auth.token}));return Object(n.useEffect)((function(){localStorage.getItem("token")&&t((function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e(d()),a.next=3,s.a.awrap(m.a.get("https://assignmentforoffice.herokuapp.com/api/auth/user",{headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}}));case 3:t=a.sent,e({type:"KEEP_ME_LOGGED",payload:t.data}),e(d());case 6:case"end":return a.stop()}}))}))})),r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/",exact:!0,render:function(){return r.a.createElement(I,null)}}),r.a.createElement(E.b,{path:"/register",exact:!0,render:function(){return r.a.createElement(v,null)}}),r.a.createElement(E.b,{path:"/main",exact:!0,render:function(){return r.a.createElement(w,null)}}),r.a.createElement(E.b,{path:"*",exact:!0,render:function(){return r.a.createElement(v,null)}}))},G=a(28),C=a(69),D=a(20),N={isAuth:!1,registerError:null,loading:!1,userData:null,loginError:null,token:localStorage.getItem("token")},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_LOADING":return Object(D.a)({},e,{loading:!e.loading});case"REGISTER_SUCCESS":return Object(D.a)({},e,{isAuth:!0,userData:t.payload.user,token:t.payload.token});case"REGISTER_ERROR":return Object(D.a)({},e,{isAuth:!1,userData:null,registerError:t.payload});case"LOGIN_LOADING":return Object(D.a)({},e,{loading:!e.loading});case"LOGIN_SUCCESS":return Object(D.a)({},e,{isAuth:!0,userData:t.payload.user,token:t.payload.token});case"LOGIN_ERROR":return Object(D.a)({},e,{isAuth:!1,userData:null,loginError:t.payload,token:null});case"LOGOUT":return Object(D.a)({},e,{isAuth:!1,userData:null,loginError:null,token:null});case"KEEP_ME_LOGGED":return Object(D.a)({},e,{isAuth:!0,userData:t.payload});default:return e}},M=a(16),Z={isLoading:!0,items:null},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GETTING_ITEMS":return Object(D.a)({},e,{isLoading:!1,items:t.payload});case"DELETE_ITEM":return Object(D.a)({},e,{items:e.items.filter((function(e){return e._id!=t.payload}))});case"ADD_ITEM":return Object(D.a)({},e,{items:[].concat(Object(M.a)(e.items),[t.payload])});default:return e}},P=Object(G.c)({auth:q,main:U}),F=Object(G.e)(P,Object(G.d)(Object(G.a)(C.a)));l.a.render(r.a.createElement(O.a,null,r.a.createElement(o.a,{store:F},r.a.createElement(_,null))),document.getElementById("root"))},77:function(e,t,a){e.exports=a(107)}},[[77,1,2]]]);
//# sourceMappingURL=main.b71956d1.chunk.js.map